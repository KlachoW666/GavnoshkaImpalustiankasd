# === Binance — источник рыночных данных (свечи, стакан, тикер) для анализа ===
# Ключи опциональны для публичных данных; с ключами — выше лимиты запросов.
BINANCE_API_KEY=wltDICdHNbkbpm3mkKD9ZKPTPQn9DGYREgWPCSWMYDoAFzoisNjpZlZnxDoQdfO4
BINANCE_API_SECRET=hTCisb23WDohLRTSEANvip60UdUasvQeQE5YpTBe9FaMdWNwO0DeZnHRYnKqw2OL
BINANCE_TESTNET=false
BINANCE_TIMEOUT=30000
USE_BINANCE_FOR_MARKET_DATA=1

# === Параметры сигналов и анализа (из .env) ===
MIN_CONFIDENCE=0.65
MIN_RR_RATIO=1.1
MAX_SIGNALS_PER_HOUR=10
ANALYSIS_INTERVAL=10.0
AI_COOLDOWN=30.0

# Исполнение ордеров — через Bitget (ключи ниже: BITGET_API_KEY, BITGET_SECRET, BITGET_PASSPHRASE).
# 1 = разрешить авто-торговлю и открытие ордеров по сигналам.
AUTO_TRADING_EXECUTION_ENABLED=1

# Прокси для Binance/Bitget. Если api недоступен (блокировка/регион) — задайте PROXY_LIST.
PROXY_LIST=http://user351292:czwhnm@138.124.21.136:2721,http://user351292:czwhnm@138.124.21.153:2721,http://user351292:czwhnm@138.124.21.207:2721,http://user351292:czwhnm@138.124.21.250:2721
PORT=3000

# Telegram bot token from @BotFather
TELEGRAM_BOT_TOKEN=8471770586:AAGaoBnlAv9hWhflbjt1mHdb-Tu2xmF3-QY
# Backend URL (for bot). Same server: http://localhost:3000
API_BASE_URL=http://localhost:3000
# API token for Telegram bot (X-Bot-Token)
BOT_WEBHOOK_SECRET=a8f3k2m9xQpL1nR7vY4wZ0cB6hJ5tU

# Admin panel password
# Login: CryptoSignalPro
ADMIN_PASSWORD=Qqwdsaqe2123!fade!CryptoSignalPro228

SITE_BASE_URL=https://clabx.ru

# Massive.com — рыночные данные: crypto, stocks (https://massive.com/stocks), options (https://massive.com/options).
# Документация: https://massive.com/docs/rest/quickstart
# На сервере в backend/.env обязательно: MASSIVE_API_KEY, MASSIVE_API_BASE_URL, USE_MASSIVE_FOR_MARKET_DATA=1 — затем pm2 restart.
# При 401 (Unknown API Key), 403 (NOT_AUTHORIZED) или 429 (rate limit) приложение автоматически переключается на Bitget.
# 401 Unknown API Key: ключ от Polygon.io используйте с MASSIVE_API_BASE_URL=https://api.polygon.io; ключ от massive.com — с https://api.massive.com
# Чтобы не использовать Massive вообще (только Bitget): USE_MASSIVE_FOR_MARKET_DATA=0
# API Key — из дашборда massive.com → Accessing the API или polygon.io.
MASSIVE_API_KEY=your-massive-api-key
MASSIVE_API_BASE_URL=https://api.massive.com
# Вкладка "Accessing Flat Files (S3)" — для доступа к flat files:
MASSIVE_ACCESS_KEY_ID=your-access-key-id
MASSIVE_SECRET_ACCESS_KEY=your-secret-access-key
MASSIVE_S3_ENDPOINT=https://files.massive.com
MASSIVE_S3_BUCKET=flatfiles
#
# Запросов в секунду к Massive (по умолчанию 1 — для снижения 429 на бесплатном плане; платный — можно 4)
MASSIVE_RATE_LIMIT_PER_SECOND=1
USE_MASSIVE_FOR_MARKET_DATA=1
# TTL кэша стакана/плотности (мс). 250 = данные каждые 0.25 с.
MARKET_CACHE_TTL_ORDERBOOK_MS=250
MARKET_CACHE_TTL_DENSITY_MS=250

# === AI для анализа и оценки сигналов (ключи сайта из .env) ===
AI_PROVIDER=anthropic
ANTHROPIC_API_KEY=your-anthropic-key
ANTHROPIC_MODEL=claude-sonnet-4-20250514
ANTHROPIC_MAX_TOKENS=2000
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.1

# Bitget — ключи пользователя вводятся в настройках сайта. Ниже — глобальный fallback (опционально).
BITGET_API_KEY=
BITGET_SECRET=
BITGET_PASSPHRASE=

# Encryption key for API keys stored in DB (required in production!)
# Generate: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=your-random-encryption-key

# TronGrid — для сканера депозитов USDT TRC20. Без ключа лимиты жёсткие; с ключом — выше (https://www.trongrid.io/)
# TRONGRID_API_KEY=your-trongrid-api-key

# CORS allowed origins (comma-separated). Empty = allow all (dev only!)
CORS_ORIGINS=https://clabx.ru,http://localhost:5173

# Session TTL in days (default: 7)
SESSION_TTL_DAYS=7
