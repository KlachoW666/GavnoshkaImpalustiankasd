# HD Wallet — USDT/TRC20

Зачисления и выводы **только по USDT в сети Tron (TRC20)**. Позже можно добавить другие сети.

## Как это работает

1. **Seed-фраза** — 12 или 24 слова. Храните в надёжном месте.
2. **Производные адреса** — Tron path `m/44'/195'/0'/0/{index}`. User 0 → index 0, User 1 → index 1 и т.д.
3. **Trust Wallet** — импортируете эту seed-фразу — видите все USDT (TRC20) на всех адресах.
4. **Сканер** — каждые 60 сек проверяет Tron на входящие USDT TRC20 и начисляет баланс.

## Настройка

### 1. Создание seed-фразы

```bash
node -e "const { HDNodeWallet } = require('ethers'); const w = HDNodeWallet.createRandom(); console.log(w.mnemonic?.phrase);"
```

Сохраните фразу в надёжном месте. Никому не передавайте.

### 2. Админ-панель

1. Откройте раздел **Кошелёк**.
2. Вставьте seed-фразу и нажмите **Сохранить**.
3. Адреса выводятся из seed по пути Tron.

### 3. Кастомные адреса (опционально)

Если нужен другой Tron-адрес вместо производного — добавьте его в «Кастомные TRC20 адреса». Адрес должен начинаться с **T** и содержать 34 символа (напр. `TYDzsYUEpvnYmQk4zGP9gZhgxw4jv3mD7A`).

### 4. Trust Wallet

1. Импортируйте seed-фразу.
2. Выберите сеть **Tron (TRC20)** для USDT.
3. Все средства на производных адресах будут видны.

## API

- `GET /api/wallet/balance` — баланс пользователя (USDT).
- `GET /api/wallet/deposit-address` — адрес для пополнения (Tron TRC20).
- `POST /api/wallet/withdraw` — заявка на вывод USDT на Tron-адрес (подтверждается админом).

## Безопасность

- Seed-фраза хранится зашифрованной в БД (или в `.env`).
- Выводы подписываются на сервере. Доступ к seed = полный контроль над средствами.
