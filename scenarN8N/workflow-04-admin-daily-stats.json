{
  "name": "CLABX â€” Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ñ‹Ð¹ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚ Ð°Ð´Ð¼Ð¸Ð½Ñƒ",
  "nodes": [
    {
      "id": "d4e5f6a7-0001-4000-8000-000000000001",
      "name": "Ð Ð°Ð· Ð² Ð´ÐµÐ½ÑŒ 09:00",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [240, 300],
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 9 * * *"
            }
          ]
        }
      }
    },
    {
      "id": "d4e5f6a7-0002-4000-8000-000000000002",
      "name": "GET Stats",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [460, 200],
      "parameters": {
        "method": "GET",
        "url": "={{ $env.CLABX_BASE_URL || 'https://your-domain.com' }}/api/stats"
      }
    },
    {
      "id": "d4e5f6a7-0003-4000-8000-000000000003",
      "name": "GET News",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [460, 400],
      "parameters": {
        "method": "GET",
        "url": "={{ $env.CLABX_BASE_URL || 'https://your-domain.com' }}/api/news?limit=5"
      }
    },
    {
      "id": "d4e5f6a7-0004-4000-8000-000000000004",
      "name": "Ð¡Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [700, 300],
      "parameters": {
        "jsCode": "const items = $input.all();\nconst statsItem = items.find(i => (i.json?.body ?? i.json)?.orders != null) || items[0];\nconst newsItem = items.find(i => (i.json?.body ?? i.json)?.news != null) || items[1] || items[0];\nconst stats = statsItem?.json?.body ?? statsItem?.json ?? {};\nconst newsData = newsItem?.json?.body ?? newsItem?.json ?? {};\nconst news = newsData.news ?? [];\nconst o = stats.orders ?? {};\nconst msg = [\n  '<b>ðŸ“Š Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ñ‹Ð¹ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚ CLABX</b>',\n  '',\n  'ÐžÑ€Ð´ÐµÑ€Ð°: ' + (o.total ?? 0) + ' (Ð²Ñ‹Ð¸Ð³Ñ€Ñ‹ÑˆÐµÐ¹: ' + (o.wins ?? 0) + ', Ð¿Ñ€Ð¾Ð¸Ð³Ñ€Ñ‹ÑˆÐµÐ¹: ' + (o.losses ?? 0) + ')',\n  'Win Rate: ' + (o.winRate ?? 0) + '%',\n  'PnL: ' + (o.totalPnl ?? 0) + ' $',\n  'ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹: ' + (stats.usersCount ?? 0) + ', Ð¾Ð½Ð»Ð°Ð¹Ð½: ' + (stats.onlineUsersCount ?? 0),\n  'ÐžÐ±ÑŠÑ‘Ð¼: ' + (stats.volumeEarned ?? 0) + ' $',\n  '',\n  news.length ? 'ÐÐ¾Ð²Ð¾ÑÑ‚Ð¸: ' + news.slice(0, 3).map(n => n.title || n.id).join(', ') : ''\n].filter(Boolean).join('\\n');\nreturn [{ json: { message: msg } }];"
      }
    },
    {
      "id": "d4e5f6a7-0005-4000-8000-000000000005",
      "name": "ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð² Telegram",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [920, 300],
      "parameters": {
        "method": "POST",
        "url": "={{ $env.CLABX_BASE_URL || 'https://your-domain.com' }}/api/notify/telegram",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            { "name": "botToken", "value": "={{ $env.TELEGRAM_BOT_TOKEN }}" },
            { "name": "chatId", "value": "={{ $env.TELEGRAM_CHAT_ID }}" },
            { "name": "message", "value": "={{ $json.message }}" }
          ]
        }
      }
    }
  ],
  "connections": {
    "Ð Ð°Ð· Ð² Ð´ÐµÐ½ÑŒ 09:00": {
      "main": [
        [
          { "node": "GET Stats", "type": "main", "index": 0 },
          { "node": "GET News", "type": "main", "index": 0 }
        ]
      ]
    },
    "GET Stats": { "main": [[{ "node": "Ð¡Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚", "type": "main", "index": 0 }]] },
    "GET News": { "main": [[{ "node": "Ð¡Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚", "type": "main", "index": 0 }]] },
    "Ð¡Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚": { "main": [[{ "node": "ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð² Telegram", "type": "main", "index": 0 }]] }
  },
  "active": false,
  "settings": {},
  "meta": { "templateCredsInvalidated": false }
}
