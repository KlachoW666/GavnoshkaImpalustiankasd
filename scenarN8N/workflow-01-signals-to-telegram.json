{
  "name": "CLABX ‚Äî –°–∏–≥–Ω–∞–ª—ã –≤ Telegram",
  "nodes": [
    {
      "id": "a1b2c3d4-0001-4000-8000-000000000001",
      "name": "–ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [240, 300],
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "minutes",
              "minutesInterval": 10
            }
          ]
        }
      }
    },
    {
      "id": "a1b2c3d4-0002-4000-8000-000000000002",
      "name": "GET –°–∏–≥–Ω–∞–ª—ã",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [460, 300],
      "parameters": {
        "method": "GET",
        "url": "={{ $env.CLABX_BASE_URL || 'https://your-domain.com' }}/api/signals?limit=10",
        "options": {}
      }
    },
    {
      "id": "a1b2c3d4-0003-4000-8000-000000000003",
      "name": "–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [680, 300],
      "parameters": {
        "jsCode": "const items = $input.all();\nconst data = items[0]?.json?.body ?? items[0]?.json;\nconst signals = Array.isArray(data) ? data : [];\nconst now = Date.now();\nconst last15min = signals.filter(s => {\n  const ts = new Date(s.timestamp || 0).getTime();\n  return (now - ts) < 15 * 60 * 1000;\n});\nif (last15min.length === 0) {\n  return [{ json: { skip: true, message: '–ù–µ—Ç –Ω–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞ 15 –º–∏–Ω' } }];\n}\nconst lines = last15min.map(s => {\n  const dir = s.direction === 'LONG' ? 'üü¢ LONG' : 'üî¥ SHORT';\n  const conf = ((s.confidence ?? 0) * 100).toFixed(0);\n  return `${s.symbol} ${dir} ${conf}%`;\n});\nconst message = '<b>–ù–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã CLABX</b>\\n' + lines.join('\\n');\nreturn [{ json: { message, send: true } }];"
      }
    },
    {
      "id": "a1b2c3d4-0004-4000-8000-000000000004",
      "name": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [900, 300],
      "parameters": {
        "method": "POST",
        "url": "={{ $env.CLABX_BASE_URL || 'https://your-domain.com' }}/api/notify/telegram",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            { "name": "botToken", "value": "={{ $env.TELEGRAM_BOT_TOKEN }}" },
            { "name": "chatId", "value": "={{ $env.TELEGRAM_CHAT_ID }}" },
            { "name": "message", "value": "={{ $json.message }}" }
          ]
        }
      }
    },
    {
      "id": "a1b2c3d4-0005-4000-8000-000000000005",
      "name": "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –µ—Å–ª–∏ –Ω–µ—Ç –Ω–æ–≤—ã—Ö",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [680, 480],
      "parameters": {
        "conditions": {
          "options": { "caseSensitive": true, "leftValue": "", "typeValidation": "strict" },
          "conditions": [
            { "id": "cond1", "leftValue": "={{ $json.send }}", "rightValue": true, "operator": { "type": "boolean", "operation": "equals" } }
          ]
        }
      }
    }
  ],
  "connections": {
    "–ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç": { "main": [[{ "node": "GET –°–∏–≥–Ω–∞–ª—ã", "type": "main", "index": 0 }]] },
    "GET –°–∏–≥–Ω–∞–ª—ã": { "main": [[{ "node": "–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ", "type": "main", "index": 0 }]] },
    "–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ": { "main": [[{ "node": "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –µ—Å–ª–∏ –Ω–µ—Ç –Ω–æ–≤—ã—Ö", "type": "main", "index": 0 }]] },
    "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –µ—Å–ª–∏ –Ω–µ—Ç –Ω–æ–≤—ã—Ö": {
      "main": [
        [{ "node": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram", "type": "main", "index": 0 }],
        []
      ]
    }
  },
  "active": false,
  "settings": {},
  "meta": { "templateCredsInvalidated": false }
}
